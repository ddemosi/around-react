(this.webpackJsonpweb_project_10=this.webpackJsonpweb_project_10||[]).push([[0],{13:function(e,t,a){e.exports=a(18)},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),c=a.n(i),o=(a(6),a(12)),l=a(3),s=a(1),m=a(8),u=a.n(m);var d=function(){return r.a.createElement("header",{className:"header width"},r.a.createElement("img",{className:"logo",src:u.a,alt:"Around the US Logo"}))},f=a(9),_=a.n(f),h=r.a.createContext();var p=function(e){var t=Object(n.useContext)(h),a=e.cardOwnerId===t._id,i=e.cardLikes.some((function(e){return e._id===t._id}));return r.a.createElement("li",{className:"element"},r.a.createElement("button",{className:"element__delete ".concat(a?"element__delete_visible":""),onClick:function(){e.handleDeleteClick(e.cardId)}}),r.a.createElement("div",{className:"element__image",onClick:function(){e.handleCardClick(e.cardLink,e.cardName)},style:{backgroundImage:"url(".concat(e.cardLink,")")}}),r.a.createElement("div",{className:"element__title-container"},r.a.createElement("h2",{className:"element__title"},e.cardName),r.a.createElement("div",{className:"element__like-container"},r.a.createElement("button",{className:"element__like-button ".concat(i?"element__like-button_active":""),onClick:function(){e.onCardLike(e.cardLikes,e.cardId)}}),r.a.createElement("p",{className:"element__like-counter"},e.cardLikes.length))))};var v=function(e){var t=Object(n.useContext)(h);return r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"profile width"},r.a.createElement("div",{className:"profile__avatar-container"},r.a.createElement("img",{className:"profile__avatar",src:t.avatar,alt:"Your profile"}),r.a.createElement("div",{className:"profile__overlay"},r.a.createElement("img",{className:"profile__overlay-image",src:_.a,alt:"pencil",onClick:e.handleEditAvatarClick}))),r.a.createElement("div",{className:"profile__name-container"},r.a.createElement("h2",{className:"profile__name"},t.name),r.a.createElement("button",{className:"profile__edit-button",onClick:e.handleEditProfileClick}),r.a.createElement("p",{className:"profile__subtitle"},t.about)),r.a.createElement("button",{className:"form__save-button profile__add-button",onClick:e.handleAddCardClick})),r.a.createElement("section",{className:"elements width"},r.a.createElement("ul",{className:"elements__grid-container"},e.cards.map((function(t){return r.a.createElement(p,{key:t.id,cardName:t.name,cardId:t.id,cardOwnerId:t.ownerId,cardLink:t.link,cardLikes:t.likes,onCardLike:e.handleCardLike,handleDeleteClick:e.handleDeleteClick,handleCardClick:e.handleCardClick})})))))};var b=function(){return r.a.createElement("footer",{className:"footer width"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Danny Demosi"))};var E=function(e){return r.a.createElement("section",{className:"image-modal ".concat(e.isOpen?"image-modal_visible":"")},r.a.createElement("div",{className:"image-modal__container "},r.a.createElement("button",{className:"modal__exit image-modal__exit",onClick:e.onClose}),r.a.createElement("img",{className:"image-modal__image",src:e.link,alt:e.name}),r.a.createElement("p",{className:"image-modal__subtitle"},e.name)))},k=a(10),g=a(11),C=new(function(){function e(t){Object(k.a)(this,e),this._apiEndpoint=t.url,this._auth=t.headers}return Object(g.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._apiEndpoint,"/users/me"),{headers:this._auth}).then((function(t){return e._checkResponse(t)}))}},{key:"getCardList",value:function(){var e=this;return fetch("".concat(this._apiEndpoint,"/cards"),{headers:this._auth}).then((function(t){return e._checkResponse(t)}))}},{key:"changeProfileInfo",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/users/me"),{method:"PATCH",headers:this._auth,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._checkResponse(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/cards"),{method:"POST",headers:this._auth,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/cards/").concat(e),{method:"DELETE",headers:this._auth}).then((function(e){return t._checkResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return!0===t?fetch("".concat(this._apiEndpoint,"/cards/likes/").concat(e),{method:"PUT",headers:this._auth}).then((function(e){return a._checkResponse(e)})):fetch("".concat(this._apiEndpoint,"/cards/likes/").concat(e),{method:"DELETE",headers:this._auth}).then((function(e){return a._checkResponse(e)}))}},{key:"updateAvatar",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/users/me/avatar"),{method:"PATCH",headers:this._auth,body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}}]),e}())({url:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"98dd8ac9-99ea-4ab0-85f9-6d61f9934e14","Content-Type":"application/json"}});var N=function(e){return r.a.createElement("form",{name:e.name,onSubmit:e.onSubmit,className:"form form_".concat(e.name," ").concat(e.isOpen?"form_visible":"")},r.a.createElement("button",{className:"modal__exit form__exit form__exit_".concat(e.name),onClick:e.onClose,type:"reset"}),r.a.createElement("p",{className:"form__title form-width"},e.title),e.children)};var O=function(e){var t=Object(n.useContext)(h),a=Object(n.useState)(""),i=Object(s.a)(a,2),c=i[0],o=i[1],l=Object(n.useState)(""),m=Object(s.a)(l,2),u=m[0],d=m[1],f=r.a.createRef(),_=r.a.createRef();return Object(n.useEffect)((function(){o(t.name),d(t.about)}),[t]),r.a.createElement(N,{onSubmit:function(a){a.preventDefault();var n=f.current.value,r=_.current.value;e.onUpdateUser(n,r),o(t.name),d(t.about)},name:"edit-profile",title:"Edit Profile",isOpen:e.isOpen,onClose:e.onClose},r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:f,onChange:function(t){e.handleNameChange(t.target.value)},id:"profile-name",className:"form__text-field form__input form__input_name",placeholder:"Name",type:"text",defaultValue:c,minLength:"2",maxLength:"40",required:!0}),r.a.createElement("span",{id:"profile-name-error",className:"form__error"})),r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:_,onChange:function(t){e.handleDescriptionChange(t.target.value)},id:"profile-about",className:"form__text-field form__input form__input_about",placeholder:"About me",type:"text",defaultValue:u,minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{id:"profile-about-error",className:"form__error"})),r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_profile form-width"},e.isSaving?"Saving...":"Save"))};var j=function(e){var t=Object(n.useContext)(h),a=r.a.createRef();return r.a.createElement(N,{name:"update-avatar",title:"Edit Avatar",onSubmit:function(t){t.preventDefault();var n=a.current.value;e.onUpdateAvatar(n)},isOpen:e.isOpen,onClose:e.onClose},r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:a,id:"avatar-link",className:"form__text-field form__input form__input_avatar-link",placeholder:"Image URL",type:"url",defaultValue:t.avatar,minLength:"1"}),r.a.createElement("span",{id:"avatar-link-error",className:"form__error"})),r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_avatar-link form-width"},e.isSaving?"Saving...":"Save"))};var S=function(e){var t=r.a.createRef(),a=r.a.createRef();return r.a.createElement(N,{name:"card",title:"New Place",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault();var r=t.current.value,i=a.current.value;e.onAddPlace(r,i)}},r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:t,id:"image-title",className:"form__text-field form__input form__input_image-title",placeholder:"Title",type:"text",defaultValue:"",minLength:"1",maxLength:"30"}),r.a.createElement("span",{id:"image-title-error",className:"form__error"})),r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:a,id:"image-link",className:"form__text-field form__input form__input_image-link",placeholder:"Image URL",type:"url",defaultValue:"",minLength:"1"}),r.a.createElement("span",{id:"image-link-error",className:"form__error"})),r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_card form-width fomr__save-button_disabled"},e.isSaving?"Saving...":"Create"))};var w=function(e){return r.a.createElement(N,{name:"confirm",title:"Are you sure?",onSubmit:function(t){t.preventDefault(),e.onCardDelete(e.confirmDeleteId)},isOpen:e.isOpen,onClose:e.onClose},r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_avatar-link form-width"},e.isSaving?"Saving...":"Yes"))};var y=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),m=Object(s.a)(c,2),u=m[0],f=m[1],_=Object(n.useState)(!1),p=Object(s.a)(_,2),k=p[0],g=p[1],N=Object(n.useState)(!1),y=Object(s.a)(N,2),x=y[0],L=y[1],D=Object(n.useState)(!1),A=Object(s.a)(D,2),I=A[0],R=A[1],P=Object(n.useState)(""),U=Object(s.a)(P,2),T=U[0],J=U[1],V=Object(n.useState)({link:"",name:"",isOpen:!1}),q=Object(s.a)(V,2),B=q[0],H=q[1],W=Object(n.useState)(!1),Y=Object(s.a)(W,2),z=Y[0],M=Y[1],$=Object(n.useState)([]),F=Object(s.a)($,2),G=F[0],K=F[1];function Q(e){i(Object(l.a)(Object(l.a)({},a),{},{name:e}))}function X(e){i(Object(l.a)(Object(l.a)({},a),{},{about:e}))}function Z(e,t){M(!0),C.changeProfileInfo({name:e,about:t}).then((function(){ee()})),M(!1),g(!1)}function ee(){C.getUserInfo().then((function(e){i({name:e.name,about:e.about,avatar:e.avatar,_id:e._id})})).catch((function(e){return console.log(e)}))}function te(e){e.target===e.currentTarget&&(f(!1),g(!1),L(!1),R(!1),H({link:"",name:"",isOpen:!1}))}return Object(n.useEffect)((function(){ee(),C.getCardList().then((function(e){K(e.map((function(e){return{name:e.name,link:e.link,likes:e.likes,id:e._id,ownerId:e.owner._id}})))})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement(h.Provider,{value:a},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"page"},r.a.createElement(d,null),r.a.createElement(v,{selectedCard:B,handleEditAvatarClick:function(e){f(!0)},handleEditProfileClick:function(e){g(!0)},handleAddCardClick:function(e){L(!0)},handleCardClick:function(e,t){H({link:e,name:t,isOpen:!0})},setCards:K,cards:G,handleDeleteClick:function(e){J(e),R(!0)},handleCardLike:function(e,t){var n=e.some((function(e){return e.id===a.id}));C.changeLikeCardStatus(t,!n).then((function(e){var a=G.map((function(a){return a.id===t?e:a}));K(a)}))}}),r.a.createElement("section",{className:"modal ".concat(B.isOpen||u||k||x||I?"modal_display_visible":""),onClick:te},r.a.createElement(j,{onUpdateAvatar:function(e){M(!0),C.updateAvatar(e).then((function(){ee()})),M(!1),f(!1)},isOpen:u,onClose:te,isSaving:z}),r.a.createElement(O,{onUpdateUser:Z,handleNameChange:Q,handleDescriptionChange:X,isOpen:k,onClose:te,isSaving:z}),r.a.createElement(S,{onUpdateUser:Z,handleNameChange:Q,handleDescriptionChange:X,isOpen:x,onClose:te,onAddPlace:function(e,t){M(!0),C.addCard({name:e,link:t}).then((function(e){K([].concat(Object(o.a)(G),[e]))})).then((function(){M(!1),L(!1)}))},isSaving:z}),r.a.createElement(w,{isOpen:I,onClose:te,onCardDelete:function(e){M(!0),C.deleteCard(e).then((function(){var t=G.filter((function(t){return t.id!==e}));K(t)})),M(!1),R(!1)},confirmDeleteId:T,isSaving:z}),r.a.createElement(E,{isOpen:B.isOpen,onClose:te,name:B.name,link:B.link})),r.a.createElement(b,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){},8:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"},9:function(e,t,a){e.exports=a.p+"static/media/edit-pencil.d476a8b8.svg"}},[[13,1,2]]]);
//# sourceMappingURL=main.ca4842fe.chunk.js.map