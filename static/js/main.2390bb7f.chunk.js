(this.webpackJsonpweb_project_10=this.webpackJsonpweb_project_10||[]).push([[0],{12:function(e,t,a){e.exports=a(17)},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),c=a.n(i),o=(a(5),a(11)),l=a(1),s=a(7),m=a.n(s);var u=function(){return r.a.createElement("header",{className:"header width"},r.a.createElement("img",{className:"logo",src:m.a,alt:"Around the US Logo"}))},d=a(8),f=a.n(d),_=r.a.createContext();var h=function(e){var t=Object(n.useContext)(_),a=e.cardOwnerId===t._id,i=e.cardLikes.some((function(e){return e._id===t._id}));return r.a.createElement("li",{className:"element"},r.a.createElement("button",{className:"element__delete ".concat(a?"element__delete_visible":""),onClick:function(){e.handleDeleteClick(e.cardId)}}),r.a.createElement("div",{className:"element__image",onClick:function(){e.handleCardClick(e.cardLink,e.cardName)},style:{backgroundImage:"url(".concat(e.cardLink,")")}}),r.a.createElement("div",{className:"element__title-container"},r.a.createElement("h2",{className:"element__title"},e.cardName),r.a.createElement("div",{className:"element__like-container"},r.a.createElement("button",{className:"element__like-button ".concat(i?"element__like-button_active":""),onClick:function(){e.onCardLike(e.cardLikes,e.cardId)}}),r.a.createElement("p",{className:"element__like-counter"},e.cardLikes.length))))};var p=function(e){var t=Object(n.useContext)(_);return r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"profile width"},r.a.createElement("div",{className:"profile__avatar-container"},r.a.createElement("img",{className:"profile__avatar",src:t.avatar,alt:"Your profile"}),r.a.createElement("div",{className:"profile__overlay"},r.a.createElement("img",{className:"profile__overlay-image",src:f.a,alt:"pencil",onClick:e.handleEditAvatarClick}))),r.a.createElement("div",{className:"profile__name-container"},r.a.createElement("h2",{className:"profile__name"},t.name),r.a.createElement("button",{className:"profile__edit-button",onClick:e.handleEditProfileClick}),r.a.createElement("p",{className:"profile__subtitle"},t.about)),r.a.createElement("button",{className:"form__save-button profile__add-button",onClick:e.handleAddCardClick})),r.a.createElement("section",{className:"elements width"},r.a.createElement("ul",{className:"elements__grid-container"},e.cards.map((function(t){return r.a.createElement(h,{key:t.id,cardName:t.name,cardId:t.id,cardOwnerId:t.ownerId,cardLink:t.link,cardLikes:t.likes,onCardLike:e.handleCardLike,handleDeleteClick:e.handleDeleteClick,handleCardClick:e.handleCardClick})})))))};var v=function(){return r.a.createElement("footer",{className:"footer width"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Danny Demosi"))};var E=function(e){return r.a.createElement("section",{className:"image-modal ".concat(e.isOpen?"image-modal_visible":"")},r.a.createElement("div",{className:"image-modal__container "},r.a.createElement("button",{className:"modal__exit image-modal__exit",onClick:e.onClose}),r.a.createElement("img",{className:"image-modal__image",src:e.link,alt:e.name}),r.a.createElement("p",{className:"image-modal__subtitle"},e.name)))},k=a(9),b=a(10),g=new(function(){function e(t){Object(k.a)(this,e),this._apiEndpoint=t.url,this._auth=t.headers}return Object(b.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._apiEndpoint,"/users/me"),{headers:this._auth}).then((function(t){return e._checkResponse(t)}))}},{key:"getCardList",value:function(){var e=this;return fetch("".concat(this._apiEndpoint,"/cards"),{headers:this._auth}).then((function(t){return e._checkResponse(t)}))}},{key:"changeProfileInfo",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/users/me"),{method:"PATCH",headers:this._auth,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._checkResponse(e)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/cards"),{method:"POST",headers:this._auth,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/cards/").concat(e),{method:"DELETE",headers:this._auth}).then((function(e){return t._checkResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return!0===t?fetch("".concat(this._apiEndpoint,"/cards/likes/").concat(e),{method:"PUT",headers:this._auth}).then((function(e){return a._checkResponse(e)})):fetch("".concat(this._apiEndpoint,"/cards/likes/").concat(e),{method:"DELETE",headers:this._auth}).then((function(e){return a._checkResponse(e)}))}},{key:"updateAvatar",value:function(e){var t=this;return fetch("".concat(this._apiEndpoint,"/users/me/avatar"),{method:"PATCH",headers:this._auth,body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}}]),e}())({url:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"98dd8ac9-99ea-4ab0-85f9-6d61f9934e14","Content-Type":"application/json"}});var C=function(e){return r.a.createElement("form",{name:e.name,onSubmit:e.onSubmit,className:"form form_".concat(e.name," ").concat(e.isOpen?"form_visible":"")},r.a.createElement("button",{className:"modal__exit form__exit form__exit_".concat(e.name),onClick:e.onClose,type:"reset"}),r.a.createElement("p",{className:"form__title form-width"},e.title),e.children)};var N=function(e){var t=Object(n.useContext)(_),a=r.a.createRef(),i=r.a.createRef();return r.a.createElement(C,{onSubmit:function(t){t.preventDefault();var n=a.current.value,r=i.current.value;e.onUpdateUser(n,r)},name:"edit-profile",title:"Edit Profile",isOpen:e.isOpen,onClose:e.onClose},r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:a,id:"profile-name",className:"form__text-field form__input form__input_name",placeholder:"Name",type:"text",defaultValue:t.name,minLength:"2",maxLength:"40",required:!0}),r.a.createElement("span",{id:"profile-name-error",className:"form__error"})),r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:i,id:"profile-about",className:"form__text-field form__input form__input_about",placeholder:"About me",type:"text",defaultValue:t.about,minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{id:"profile-about-error",className:"form__error"})),r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_profile form-width"},e.isSaving?"Saving...":"Save"))};var O=function(e){var t=Object(n.useContext)(_),a=r.a.createRef();return r.a.createElement(C,{name:"update-avatar",title:"Edit Avatar",onSubmit:function(t){t.preventDefault();var n=a.current.value;e.onUpdateAvatar(n)},isOpen:e.isOpen,onClose:e.onClose},r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:a,id:"avatar-link",className:"form__text-field form__input form__input_avatar-link",placeholder:"Image URL",type:"url",defaultValue:t.avatar,minLength:"1"}),r.a.createElement("span",{id:"avatar-link-error",className:"form__error"})),r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_avatar-link form-width"},e.isSaving?"Saving...":"Save"))};var w=function(e){var t=r.a.createRef(),a=r.a.createRef();return r.a.createElement(C,{name:"card",title:"New Place",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault();var r=t.current.value,i=a.current.value;e.onAddPlace(r,i)}},r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:t,id:"image-title",className:"form__text-field form__input form__input_image-title",placeholder:"Title",type:"text",defaultValue:"",minLength:"1",maxLength:"30"}),r.a.createElement("span",{id:"image-title-error",className:"form__error"})),r.a.createElement("div",{className:"form__text-field-wrapper form-width"},r.a.createElement("input",{ref:a,id:"image-link",className:"form__text-field form__input form__input_image-link",placeholder:"Image URL",type:"url",defaultValue:"",minLength:"1"}),r.a.createElement("span",{id:"image-link-error",className:"form__error"})),r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_card form-width"},e.isSaving?"Saving...":"Create"))};var S=function(e){return r.a.createElement(C,{name:"confirm",title:"Are you sure?",onSubmit:function(t){t.preventDefault(),e.onCardDelete(e.confirmDeleteId)},isOpen:e.isOpen,onClose:e.onClose},r.a.createElement("button",{type:"submit",className:"form__save-button form__save-button_avatar-link form-width"},e.isSaving?"Saving...":"Yes"))};var y=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),s=Object(l.a)(c,2),m=s[0],d=s[1],f=Object(n.useState)(!1),h=Object(l.a)(f,2),k=h[0],b=h[1],C=Object(n.useState)(!1),y=Object(l.a)(C,2),j=y[0],x=y[1],L=Object(n.useState)(!1),I=Object(l.a)(L,2),A=I[0],D=I[1],R=Object(n.useState)(""),U=Object(l.a)(R,2),P=U[0],T=U[1],J=Object(n.useState)({link:"",name:"",isOpen:!1}),V=Object(l.a)(J,2),q=V[0],B=V[1],H=Object(n.useState)(!1),W=Object(l.a)(H,2),Y=W[0],z=W[1],M=Object(n.useState)([]),$=Object(l.a)(M,2),F=$[0],G=$[1];function K(e,t){z(!0),g.changeProfileInfo({name:e,about:t}).then((function(){Q()})).catch((function(e){return console.log(e)})),z(!1),b(!1)}function Q(){g.getUserInfo().then((function(e){i({name:e.name,about:e.about,avatar:e.avatar,_id:e._id})})).catch((function(e){return console.log(e)}))}function X(e){e.target===e.currentTarget&&(d(!1),b(!1),x(!1),D(!1),B({link:"",name:"",isOpen:!1}))}return Object(n.useEffect)((function(){g.getUserInfo().then((function(e){var t={name:e.name,about:e.about,avatar:e.avatar,_id:e._id};return i(t),t})).then((function(e){g.getCardList().then((function(t){G(t.map((function(t){return{name:t.name,link:t.link,likes:t.likes,id:t._id,ownerId:t.owner._id,myId:e._id}})))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement(_.Provider,{value:a},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"page"},r.a.createElement(u,null),r.a.createElement(p,{selectedCard:q,handleEditAvatarClick:function(e){d(!0)},handleEditProfileClick:function(e){b(!0)},handleAddCardClick:function(e){x(!0)},handleCardClick:function(e,t){B({link:e,name:t,isOpen:!0})},setCards:G,cards:F,handleDeleteClick:function(e){T(e),D(!0)},handleCardLike:function(e,t){var n=e.some((function(e){return e.id===a.id}));g.changeLikeCardStatus(t,!n).then((function(e){var a=F.map((function(a){return a.id===t?e:a}));G(a)})).catch((function(e){return console.log(e)}))}}),r.a.createElement("section",{className:"modal ".concat(q.isOpen||m||k||j||A?"modal_display_visible":""),onClick:X},r.a.createElement(O,{onUpdateAvatar:function(e){z(!0),g.updateAvatar(e).then((function(){Q()})).catch((function(e){return console.log(e)})),z(!1),d(!1)},isOpen:m,onClose:X,isSaving:Y}),r.a.createElement(N,{onUpdateUser:K,isOpen:k,onClose:X,isSaving:Y}),r.a.createElement(w,{onUpdateUser:K,isOpen:j,onClose:X,onAddPlace:function(e,t){z(!0),g.addCard({name:e,link:t}).then((function(e){var t={name:e.name,link:e.link,likes:e.likes,id:e._id,ownerId:e.owner._id};G([].concat(Object(o.a)(F),[t]))})).then((function(){z(!1),x(!1)})).catch((function(e){return console.log(e)}))},isSaving:Y}),r.a.createElement(S,{isOpen:A,onClose:X,onCardDelete:function(e){z(!0),g.deleteCard(e).then((function(){var t=F.filter((function(t){return t.id!==e}));G(t)})).catch((function(e){return console.log(e)})),z(!1),D(!1)},confirmDeleteId:P,isSaving:Y}),r.a.createElement(E,{isOpen:q.isOpen,onClose:X,name:q.name,link:q.link})),r.a.createElement(v,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,a){},7:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"},8:function(e,t,a){e.exports=a.p+"static/media/edit-pencil.d476a8b8.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.2390bb7f.chunk.js.map